{"ast":null,"code":"// API сервис для работы с backend (PostgreSQL)\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Вспомогательная функция для обработки ответов\nasync function handleResponse(response) {\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({\n      error: 'Ошибка сервера'\n    }));\n    throw new Error(error.error || `HTTP error! status: ${response.status}`);\n  }\n  return response.json();\n}\nexport const api = {\n  // ========== Пользователи ==========\n  async getUsers() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users`);\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка получения пользователей:', error);\n      throw error;\n    }\n  },\n  async getUser(id) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/${id}`);\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка получения пользователя:', error);\n      throw error;\n    }\n  },\n  async createUser(userData) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка создания пользователя:', error);\n      throw error;\n    }\n  },\n  async updateUser(id, userData) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка обновления пользователя:', error);\n      throw error;\n    }\n  },\n  // ========== Рецепты ==========\n  async getRecipes() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/recipes`);\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка получения рецептов:', error);\n      throw error;\n    }\n  },\n  async getRecipe(id) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/recipes/${id}`);\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка получения рецепта:', error);\n      throw error;\n    }\n  },\n  // ========== Планы питания ==========\n  async getPlans() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/plans`);\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка получения планов:', error);\n      throw error;\n    }\n  },\n  async getUserPlans(userId) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/plans/user/${userId}`);\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка получения планов пользователя:', error);\n      throw error;\n    }\n  },\n  async createPlan(planData) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/plans`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(planData)\n      });\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка создания плана:', error);\n      throw error;\n    }\n  },\n  async updatePlan(planId, planData) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/plans/${planId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(planData)\n      });\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка обновления плана:', error);\n      throw error;\n    }\n  },\n  async deletePlan(planId) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/plans/${planId}`, {\n        method: 'DELETE'\n      });\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка удаления плана:', error);\n      throw error;\n    }\n  },\n  // ========== Заболевания ==========\n  async getDiseases() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/diseases`);\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('Ошибка получения заболеваний:', error);\n      throw error;\n    }\n  },\n  // ========== Проверка здоровья API ==========\n  async checkHealth() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/health`);\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('API недоступен:', error);\n      return {\n        status: 'error',\n        database: 'disconnected'\n      };\n    }\n  }\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","handleResponse","response","ok","error","json","catch","Error","status","api","getUsers","fetch","console","getUser","id","createUser","userData","method","headers","body","JSON","stringify","updateUser","getRecipes","getRecipe","getPlans","getUserPlans","userId","createPlan","planData","updatePlan","planId","deletePlan","getDiseases","checkHealth","database"],"sources":["C:/Users/ForWinkk/Desktop/planner/nutriplanner-frontend/src/utils/api.js"],"sourcesContent":["// API сервис для работы с backend (PostgreSQL)\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// Вспомогательная функция для обработки ответов\r\nasync function handleResponse(response) {\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ error: 'Ошибка сервера' }));\r\n    throw new Error(error.error || `HTTP error! status: ${response.status}`);\r\n  }\r\n  return response.json();\r\n}\r\n\r\nexport const api = {\r\n  // ========== Пользователи ==========\r\n  async getUsers() {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/users`);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка получения пользователей:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getUser(id) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/users/${id}`);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка получения пользователя:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createUser(userData) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/users`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(userData)\r\n      });\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка создания пользователя:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateUser(id, userData) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/users/${id}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(userData)\r\n      });\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка обновления пользователя:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ========== Рецепты ==========\r\n  async getRecipes() {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/recipes`);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка получения рецептов:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getRecipe(id) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/recipes/${id}`);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка получения рецепта:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ========== Планы питания ==========\r\n  async getPlans() {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/plans`);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка получения планов:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getUserPlans(userId) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/plans/user/${userId}`);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка получения планов пользователя:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createPlan(planData) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/plans`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(planData)\r\n      });\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка создания плана:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updatePlan(planId, planData) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/plans/${planId}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(planData)\r\n      });\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка обновления плана:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deletePlan(planId) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/plans/${planId}`, {\r\n        method: 'DELETE'\r\n      });\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка удаления плана:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ========== Заболевания ==========\r\n  async getDiseases() {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/diseases`);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('Ошибка получения заболеваний:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ========== Проверка здоровья API ==========\r\n  async checkHealth() {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/health`);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('API недоступен:', error);\r\n      return { status: 'error', database: 'disconnected' };\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}